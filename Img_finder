--[[
    FLOW IMAGE FINDER (LOADER MODULE V2)
    - Conecta com lista.im
    - Processa opções (1-4) ou ID Direta
]]

local function ProcessarSistema()
    -- 1. Carrega a lista de imagens externa
    pcall(function()
        loadstring(game:HttpGet("https://raw.githubusercontent.com/inkzinho-fofin/Inkzin_hub/refs/heads/main/Lista.%20Im"))()
    end)

    local db = getgenv().FlowImagesDatabase or {}
    local input = getgenv().CustomFruitImg
    local finalID = db["Default"]

    -- 2. Lógica de Seleção
    if input == nil or input == "" then
        finalID = db["Default"]
    elseif db[input] then 
        -- Se o usuário digitou 1, 2, 3 ou 4
        finalID = db[input]
    else
        -- Se o usuário digitou uma ID numérica personalizada
        local numericId = tostring(input):match("%d+")
        finalID = numericId or db["Default"]
    end

    -- 3. Entrega o resultado para a Interface
    getgenv().FlowImageData = "rbxassetid://" .. finalID
end

ProcessarSistema()
print("[FLOW] Loader: Imagem definida para " .. getgenv().FlowImageData)
