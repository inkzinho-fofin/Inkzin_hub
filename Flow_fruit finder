--[[
    â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
    â•‘                 FLOW_FRUIT FINDER [V3]                   â•‘
    â•‘          Interface + Quick Chat + Stickers               â•‘
    â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
]]

repeat task.wait() until game:IsLoaded() and game:GetService("Players").LocalPlayer

local Players, ReplicatedStorage, TweenService, HttpService, TeleportService, UserInputService = 
    game:GetService("Players"), 
    game:GetService("ReplicatedStorage"),
    game:GetService("TweenService"),
    game:GetService("HttpService"),
    game:GetService("TeleportService"),
    game:GetService("UserInputService")

local plr = Players.LocalPlayer
local TextChatService = game:GetService("TextChatService")
_G.AutoFruit = true

-- UI Setup
local ScreenGui = Instance.new("ScreenGui", game:GetService("CoreGui"))
ScreenGui.Name = "FlowFruitV3"

----------------------------------------------------------------
-- SISTEMA DE MENSAGENS RÃPIDAS (CANTO INFERIOR DIREITO)
----------------------------------------------------------------

local QuickChatFrame = Instance.new("Frame", ScreenGui)
QuickChatFrame.Size = UDim2.new(0, 180, 0, 150)
QuickChatFrame.Position = UDim2.new(1, -190, 1, -160)
QuickChatFrame.BackgroundColor3 = Color3.fromRGB(15, 15, 20)
QuickChatFrame.BorderSizePixel = 0
Instance.new("UICorner", QuickChatFrame).CornerRadius = UDim.new(0, 8)
local ChatStroke = Instance.new("UIStroke", QuickChatFrame)
ChatStroke.Color = Color3.fromRGB(0, 170, 255)
ChatStroke.Transparency = 0.6

-- Sticker Principal
local Sticker = Instance.new("ImageLabel", QuickChatFrame)
Sticker.Size = UDim2.new(0, 40, 0, 40)
Sticker.Position = UDim2.new(0.5, -20, 0, -25)
Sticker.Image = "rbxassetid://135206467334527" -- ID solicitado
Sticker.BackgroundTransparency = 1
Sticker.ZIndex = 2

local ChatTitle = Instance.new("TextLabel", QuickChatFrame)
ChatTitle.Size = UDim2.new(1, 0, 0, 25)
ChatTitle.Position = UDim2.new(0, 0, 0, 15)
ChatTitle.Text = "QUICK MESSAGES"
ChatTitle.TextColor3 = Color3.fromRGB(0, 170, 255)
ChatTitle.Font = Enum.Font.GothamBold
ChatTitle.TextSize = 10
ChatTitle.BackgroundTransparency = 1

local ButtonList = Instance.new("Frame", QuickChatFrame)
ButtonList.Size = UDim2.new(0.9, 0, 0.7, 0)
ButtonList.Position = UDim2.new(0.05, 0, 0.25, 0)
ButtonList.BackgroundTransparency = 1
local ListLayout = Instance.new("UIListLayout", ButtonList)
ListLayout.Padding = UDim.new(0, 4)

local function CreateQuickMsg(text)
    local btn = Instance.new("TextButton", ButtonList)
    btn.Size = UDim2.new(1, 0, 0, 25)
    btn.BackgroundColor3 = Color3.fromRGB(30, 30, 35)
    btn.Text = text
    btn.TextColor3 = Color3.fromRGB(255, 255, 255)
    btn.Font = Enum.Font.Gotham
    btn.TextSize = 11
    Instance.new("UICorner", btn).CornerRadius = UDim.new(0, 4)
    
    btn.MouseButton1Click:Connect(function()
        if TextChatService.ChatVersion == Enum.ChatVersion.TextChatService then
            TextChatService.TextChannels.RBXGeneral:SendAsync(text)
        else
            ReplicatedStorage.DefaultChatSystemChatEvents.SayMessageRequest:FireServer(text, "All")
        end
    end)
end

-- Mensagens PadrÃ£o
CreateQuickMsg("Flow Finder On! ðŸŽ")
CreateQuickMsg("Fruit Found! GG")
CreateQuickMsg("Server Hopping...")

----------------------------------------------------------------
-- INTERFACE DE STATUS (ORIGINAL ATUALIZADA)
----------------------------------------------------------------

local OpenBtn = Instance.new("TextButton", ScreenGui)
OpenBtn.Size = UDim2.new(0, 50, 0, 50)
OpenBtn.Position = UDim2.new(0, 20, 0.5, 0)
OpenBtn.BackgroundColor3 = Color3.fromRGB(0, 170, 255)
OpenBtn.Text = "FLOW"
OpenBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
OpenBtn.Font = Enum.Font.GothamBold
OpenBtn.TextSize = 12
Instance.new("UICorner", OpenBtn).CornerRadius = UDim.new(1, 0)
Instance.new("UIStroke", OpenBtn).Color = Color3.fromRGB(255, 255, 255)

local MainFrame = Instance.new("Frame", ScreenGui)
MainFrame.Size = UDim2.new(0, 220, 0, 180)
MainFrame.Position = UDim2.new(0.5, -110, 0.5, -90)
MainFrame.BackgroundColor3 = Color3.fromRGB(15, 15, 20)
MainFrame.Visible = false
Instance.new("UICorner", MainFrame).CornerRadius = UDim.new(0, 10)

local StatusLabel = Instance.new("TextLabel", MainFrame)
StatusLabel.Size = UDim2.new(0.9, 0, 0, 20)
StatusLabel.Position = UDim2.new(0.05, 0, 0, 35)
StatusLabel.Text = "Status: Idle"
StatusLabel.TextColor3 = Color3.fromRGB(200, 200, 200)
StatusLabel.Font = Enum.Font.GothamMedium
StatusLabel.TextSize = 12
StatusLabel.BackgroundTransparency = 1

local LogList = Instance.new("ScrollingFrame", MainFrame)
LogList.Size = UDim2.new(0.9, 0, 0, 100)
LogList.Position = UDim2.new(0.05, 0, 0, 60)
LogList.BackgroundTransparency = 1
LogList.AutomaticCanvasSize = Enum.AutomaticSize.Y
LogList.ScrollBarThickness = 2
Instance.new("UIListLayout", LogList)

-- Draggable Function
local function MakeDraggable(obj)
    local dragging, dragStart, startPos
    obj.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 then
            dragging = true; dragStart = input.Position; startPos = obj.Position
        end
    end)
    obj.InputChanged:Connect(function(input)
        if dragging and input.UserInputType == Enum.UserInputType.MouseMovement then
            local delta = input.Position - dragStart
            obj.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
        end
    end)
    obj.InputEnded:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 then dragging = false end
    end)
end
MakeDraggable(OpenBtn)
MakeDraggable(QuickChatFrame) -- TambÃ©m arrastÃ¡vel

OpenBtn.MouseButton1Click:Connect(function() MainFrame.Visible = not MainFrame.Visible end)

----------------------------------------------------------------
-- LÃ“GICA DE COLETA (MANTIDA)
----------------------------------------------------------------

local function Collect(item)
    if not item then return end
    StatusLabel.Text = "Status: Collecting " .. item.Name
    local target = item:IsA("Tool") and item:FindFirstChild("Handle") or item:FindFirstChildWhichIsA("BasePart", true)
    if target and plr.Character and plr.Character:FindFirstChild("HumanoidRootPart") then
        local startTime = tick()
        repeat
            plr.Character.HumanoidRootPart.CFrame = target.CFrame + Vector3.new(0, 3, 0)
            task.wait()
        until not item:IsDescendantOf(workspace) or tick() - startTime > 8
        return not item:IsDescendantOf(workspace)
    end
end

task.spawn(function()
    while task.wait(1) do
        if _G.AutoFruit then
            local fruits = {}
            for _, v in ipairs(workspace:GetChildren()) do
                if (v:IsA("Tool") and v.Name:lower():find("fruit")) or (v:IsA("Model") and v.Name:lower() == "fruit") then
                    table.insert(fruits, v)
                end
            end

            if #fruits > 0 then
                for _, fruit in ipairs(fruits) do
                    Collect(fruit)
                    task.wait(0.5)
                    pcall(function()
                        for _, f in ipairs(plr.Backpack:GetChildren()) do
                            if f.Name:find("Fruit") then
                                ReplicatedStorage.Remotes.CommF_:InvokeServer("StoreFruit", f:GetAttribute("OriginalName"), f)
                            end
                        end
                    end)
                end
            else
                StatusLabel.Text = "Status: No fruits. Hopping..."
                task.wait(3)
                local servers = HttpService:JSONDecode(game:HttpGet("https://games.roblox.com/v1/games/" .. game.PlaceId .. "/servers/Public?sortOrder=Asc&limit=100"))
                for _, s in ipairs(servers.data) do
                    if s.playing < s.maxPlayers and s.id ~= game.JobId then
                        TeleportService:TeleportToPlaceInstance(game.PlaceId, s.id)
                        break
                    end
                end
            end
        end
    end
end)

print("Flow Fruit V3 Loaded!")
